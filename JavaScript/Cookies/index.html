<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with Cookies In JS</title>
</head>
<body>
    <p>Why use cookies instead of local storage? <br> Because server can access cookies value but can't access the localstorage value.</p>
    <button onclick="createCookies()">Create Cookie</button>
    <button onclick="readCookies()">Read Cookie</button>
    <button onclick="deleteCookies()">Delete Cookie</button>
    <script>
        function createCookies()
        {
			document.cookie = "username = Giver";
			// Setting different key:value pair will append the data instead of overwriting
            document.cookie = "password = abc";
			// Setting same key again will change(update) it's value 
            document.cookie = "password = 123";
            // If expiry date is not set, then the cookie is deleted when browser is closed
            // If path is not set, then default path is current document path for the cookie
            // Use ";" to separate the cookie and other options just like a comma
			// Using "path = /" sets root directory as the path of the cookie 
            document.cookie = "age = 21; expires = Sun, 01 Jan 9999 01:00:00 GMT; path = /";
            alert("Cookies has been created");
        }
        function readCookies()
        {
            let allCookies = document.cookie;
            console.log(allCookies);
            let cookieArray = allCookies.split("; ");
            console.log(cookieArray);
            for(let i = 0; i < cookieArray.length; i++)
            {
				// Split "username = Giver Khadka" into ["username", "Giver Khadka"] and so on
                let key = cookieArray[i].split("=")[0]; 			
                let value = cookieArray[i].split("=")[1]; 
                console.log(`Key is ${key} and value is ${value}`);
            }
        }
        function deleteCookies()
        {
            // Overwrite previous key's value with emptyness & specify expiry date to past date
            // NOTE: Need to specify the path of which cookie to delete
			// "username" cookie uses default path. So, no need to mention path while deleting 
            document.cookie = "username =; expires = Sun, 01 Jan 2000 01:00:00 GMT";
            document.cookie = "password =; expires = Sun, 01 Jan 2000 01:00:00 GMT";
			// "age" cookie uses root directory path. So, need to mention path while deleting 
            document.cookie = "age =; expires = Sun, 01 Jan 2000 01:00:00 GMT; path = /";
            console.log(`Cookie after deletion:`);
            readCookies();
            alert("Cookies has been deleted");
        }
    </script>
</body>
</html>
